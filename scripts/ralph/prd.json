{
  "project": "baisics",
  "branchName": "ralph/usda-food-search-ui-polish",
  "description": "USDA food search integration (#122) plus UI polish for template detail (#227) and program header (#105)",
  "userStories": [
    {
      "id": "US-001",
      "title": "Create USDA FoodData Central API service",
      "description": "As a developer, I need a typed service layer to interact with USDA FoodData Central API for food search.",
      "acceptanceCriteria": [
        "Create src/lib/usda/client.ts with searchFoods() and getFoodDetails() functions",
        "Create src/lib/usda/types.ts with USDAFood, USDASearchResult, FoodNutrient types",
        "Add USDA_API_KEY to .env.example with comment",
        "searchFoods accepts query string and optional pageSize, returns typed results",
        "getFoodDetails accepts fdcId, returns full food with nutrients",
        "Extract calories, protein, carbs, fat from nutrient array",
        "npm run typecheck passes"
      ],
      "priority": 1,
      "passes": true,
      "notes": "API docs: https://fdc.nal.usda.gov/api-guide.html. Key in .issues.json notes."
    },
    {
      "id": "US-002",
      "title": "Create food search API endpoint",
      "description": "As a frontend developer, I need an API route to search foods without exposing the USDA API key.",
      "acceptanceCriteria": [
        "Create src/app/api/foods/search/route.ts",
        "GET endpoint accepts ?q=query&limit=10 params",
        "Returns simplified food results: fdcId, name, brand, calories, protein, carbs, fat per 100g",
        "Returns 400 if query missing or too short (<2 chars)",
        "Returns empty array if no results",
        "Handles USDA API errors gracefully with 502 status",
        "npm run typecheck passes"
      ],
      "priority": 2,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-003",
      "title": "Create FoodSearchAutocomplete component",
      "description": "As a user, I want to search for foods by name with autocomplete suggestions showing macros.",
      "acceptanceCriteria": [
        "Create src/components/nutrition/FoodSearchAutocomplete.tsx",
        "Input field with 300ms debounce on typing",
        "Dropdown shows matching foods with name, brand (if any), and macros per 100g",
        "Loading spinner while fetching",
        "Empty state message when no results",
        "onSelect callback fires with selected food data",
        "Keyboard navigation (arrow keys, enter to select, escape to close)",
        "npm run typecheck passes",
        "Verify component renders correctly in browser"
      ],
      "priority": 3,
      "passes": true,
      "notes": "Style with existing design system colors (navy, coral, white)."
    },
    {
      "id": "US-004",
      "title": "Create ServingSizeSelector component",
      "description": "As a user, I want to select a serving size and see calculated macros before adding food.",
      "acceptanceCriteria": [
        "Create src/components/nutrition/ServingSizeSelector.tsx",
        "Props: food (with per-100g macros), onConfirm callback",
        "Number input for grams (default 100)",
        "Quick buttons: 50g, 100g, 150g, 200g",
        "Live calculation showing calories, protein, carbs, fat for selected amount",
        "Confirm button calls onConfirm with calculated macros",
        "npm run typecheck passes",
        "Verify component renders correctly in browser"
      ],
      "priority": 4,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-005",
      "title": "Add recent foods cache per user",
      "description": "As a user, I want to quickly re-add foods I've logged before without searching again.",
      "acceptanceCriteria": [
        "Create src/app/api/foods/recent/route.ts GET endpoint",
        "Returns last 10 unique foods logged by current user",
        "Store recent foods in localStorage keyed by oderId",
        "FoodSearchAutocomplete shows recent foods when input is empty/focused",
        "Recent foods section has 'Recent' label header",
        "Clicking recent food selects it same as search result",
        "npm run typecheck passes"
      ],
      "priority": 5,
      "passes": true,
      "notes": "Use localStorage for MVP, can migrate to DB later."
    },
    {
      "id": "US-006",
      "title": "Integrate food search into meal prep page",
      "description": "As a user, I want to search and add foods from the meal prep page to track my daily nutrition.",
      "acceptanceCriteria": [
        "Add FoodSearchAutocomplete to src/app/meal-prep/page.tsx",
        "After selecting food and serving, add macros to daily NutritionLog",
        "Show success toast after adding",
        "Update daily totals display immediately",
        "Save selected food to recent foods cache",
        "npm run typecheck passes",
        "Verify component renders correctly in browser"
      ],
      "priority": 6,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-007",
      "title": "Polish template detail page header and stats",
      "description": "As a user viewing a template, I want a more visually impactful header with prominent stats.",
      "acceptanceCriteria": [
        "Add coral accent color to stats boxes (border or background tint)",
        "Make stat numbers larger and bolder (text-3xl or text-4xl)",
        "Add subtle gradient or pattern to navy header section",
        "Improve visual separation between header and content sections",
        "Stats should use coral for numbers, navy for labels",
        "npm run typecheck passes",
        "Verify component renders correctly in browser"
      ],
      "priority": 7,
      "passes": false,
      "notes": "File: src/app/templates/[slug]/page.tsx. Keep structure, just enhance visuals."
    },
    {
      "id": "US-008",
      "title": "Enhance template detail CTA section",
      "description": "As a user, I want a more prominent call-to-action that encourages me to start the program.",
      "acceptanceCriteria": [
        "CTA section has coral background with white text",
        "Generate My Program button is larger and more prominent",
        "Add subtle hover animation to CTA button",
        "Better spacing around CTA section",
        "CTA section stands out from surrounding white cards",
        "npm run typecheck passes",
        "Verify component renders correctly in browser"
      ],
      "priority": 8,
      "passes": false,
      "notes": "File: src/app/templates/[slug]/page.tsx"
    },
    {
      "id": "US-009",
      "title": "Create hero-style program header with stats badges",
      "description": "As a user viewing my program, I want an exciting hero header that showcases program details.",
      "acceptanceCriteria": [
        "Program header has gradient background (navy to navy-light)",
        "Program title is large and bold (text-3xl or text-4xl)",
        "Add stats badges: duration, days/week, difficulty level",
        "Badges use coral background with white text, pill-shaped",
        "Header takes more vertical space for impact",
        "Responsive: badges stack on mobile",
        "npm run typecheck passes",
        "Verify component renders correctly in browser"
      ],
      "priority": 9,
      "passes": false,
      "notes": "Files: src/app/program/review/page.tsx, src/app/components/ProgramDisplay.tsx"
    },
    {
      "id": "US-010",
      "title": "Improve program CTA and secondary actions",
      "description": "As a user, I want a clear primary action and easy access to secondary actions.",
      "acceptanceCriteria": [
        "Start Training / Begin Program button is large, coral, prominent",
        "Secondary actions (PDF, Share, Email) are smaller, outlined style",
        "Secondary actions grouped in a row below primary CTA",
        "Disclaimer is collapsible or moved to bottom/modal",
        "Clear visual hierarchy: primary action dominates",
        "npm run typecheck passes",
        "Verify component renders correctly in browser"
      ],
      "priority": 10,
      "passes": false,
      "notes": "Files: src/app/program/review/page.tsx, src/app/components/ProgramDisplay.tsx"
    }
  ]
}
