# Ralph Progress Log
Started: Mon Jan 19 16:23:04 EST 2026
---

## Codebase Patterns
- **Playwright configs**: Project already had playwright.config.ts for screenshots. E2E tests use separate playwright.e2e.config.ts to avoid conflicts.
- **E2E test script**: `npm run test:e2e` uses `--config playwright.e2e.config.ts`

---

## 2026-01-19 - US-001: Install and configure Playwright for Next.js
- Installed @playwright/test@1.57.0 as devDependency
- Created playwright.e2e.config.ts with:
  - testDir: ./tests/e2e
  - baseURL: http://localhost:3001
  - webServer config to run npm run dev
  - chromium project with Desktop Chrome
- Added "test:e2e": "playwright test --config playwright.e2e.config.ts" to package.json
- Created tests/e2e/.gitkeep placeholder
- Verified: npx playwright test --version = 1.57.0
- Verified: npm run lint and npm run build pass
- **Learnings for future iterations:**
  - Existing playwright.config.ts is for screenshot tests in tests/screenshots/
  - Must use separate config file (playwright.e2e.config.ts) to avoid breaking existing screenshot workflow
  - Screenshot scripts use --project flag to specify Desktop Chrome or Mobile Safari
- **Auth flow (dev mode)**: Magic link stored in cookie `baisics.__dev_magic_link`. Verify page shows "Click here to sign in →" link.
- **No typecheck script**: Project uses `npm run build` for type verification. Acceptance criteria mentioning typecheck should use build instead.
---

## 2026-01-19 - US-002: Create auth test fixture with magic link helper
- Created tests/fixtures/auth.ts with:
  - `loginAsUser(page, email)`: navigates to signin, enters email, clicks submit, waits for verify page, clicks dev magic link
  - `logoutUser(page)`: finds and clicks logout button in header, waits for redirect to /
- Files created: tests/fixtures/auth.ts
- Verified: npm run lint passes (warnings only)
- Verified: npm run build passes
- **Learnings for future iterations:**
  - Signin page has "Send magic link" button (not "Continue with Email")
  - Dev magic link shows as "Click here to sign in →" on verify-request page
  - Logout uses signOut from next-auth with callbackUrl: '/'
  - After login, users redirect to /dashboard (existing user) or /hi (new user)
---
